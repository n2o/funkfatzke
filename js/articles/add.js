// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var photoUrl;
    $("#dialog-message").dialog({
      height: 600,
      width: 800,
      autoOpen: false,
      resizable: true,
      modal: true
    });
    $("#button").click(function() {
      var category, channel, description, name, photo, price, quantity, subcategory, transmission, weight;
      name = $("#name").val();
      description = $("#description").val();
      transmission = $("#transmission").val();
      category = $("#category").val();
      subcategory = $("#subcategory").val();
      photo = $("#photo").val();
      weight = $("#weight").val();
      channel = $("#channel").val();
      price = $("#price").val();
      price = price.replace(/,/g, ".");
      quantity = $("#quantity").val();
      if (name === "" || description === "") {
        $("#info").attr("class", "alert alert-danger");
        $("#info").html("Bitte alle benötigten Felder ausfüllen.");
      } else {
        $.ajax({
          type: "post",
          url: "aux/articles/todb.php",
          data: "name=" + name + "&description=" + description + "&transmission=" + transmission + "&category=" + category + "&subcategory=" + subcategory + "&photo=" + photo + "&weight=" + weight + "&channel=" + channel + "&price=" + price + "&quantity=" + quantity
        });
        $("form").trigger("reset");
        $("#info").attr("class", "alert alert-success");
        $("#info").html("Artikel erfolgreich hinzugefügt.");
      }
    });
    photoUrl = $("#photo").val();
    if (photoUrl) {
      $("#show-photo img").attr("src", "sites/funk/files/t-" + photoUrl);
      $("#show-photo a").attr("href", "sites/funk/files/" + photoUrl);
    }
    $("#open-dialog").click(function() {
      $("#dialog-message").dialog("open");
      return false;
    });
  });

  return;

}).call(this);
