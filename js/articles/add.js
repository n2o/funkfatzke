// Generated by CoffeeScript 1.8.0
var root;

root = typeof exports !== "undefined" && exports !== null ? exports : this;

$(function() {
  var photoUrl;
  $("#dialog-message").dialog({
    height: 600,
    width: 800,
    autoOpen: false,
    resizable: true,
    modal: true
  });
  $("#button").click(function() {
    var category, channel, description, name, photo, price, quantity, subcategory, transmission, weight;
    name = $("#name").val();
    description = $("#description").val();
    transmission = $("#transmission").val();
    category = $("#category").val();
    subcategory = $("#subcategory").val();
    photo = $("#photo").val();
    weight = $("#weight").val();
    channel = $("#channel").val();
    price = $("#price").val();
    price = price.replace(/,/g, ".");
    quantity = $("#quantity").val();
    if (name === "" || description === "") {
      root.growl("Bitte alle erforderlichen Felder ausfüllen.", "info");
    } else {
      $.ajax({
        type: "post",
        url: "aux/articles/todb.php",
        data: "name=" + name + "&description=" + description + "&transmission=" + transmission + "&category=" + category + "&subcategory=" + subcategory + "&photo=" + photo + "&weight=" + weight + "&channel=" + channel + "&price=" + price + "&quantity=" + quantity,
        success: function() {
          $("form").trigger("reset");
          root.growl("Artikel erfolgreich hinzugefügt.", "success");
          return root.getList();
        }
      });
    }
  });
  photoUrl = $("#photo").val();
  if (photoUrl) {
    $("#show-photo img").attr("src", "sites/funk/files/t-" + photoUrl);
    $("#show-photo a").attr("href", "sites/funk/files/" + photoUrl);
  }
  $("#open-dialog").click(function() {
    $("#dialog-message").dialog("open");
    false;
  });
});
